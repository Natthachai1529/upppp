<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="report_purchaseorder_document" model="ir.ui.view">
            <field name="name">report.purchaseorder.document.inherit</field>
            <field name="type">qweb</field>
            <field name="priority">9999</field>
            <field name="inherit_id" ref="purchase.report_purchaseorder_document"/>
            <field name="arch" type="xml">
                <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[2]/tr[1]/t[1]/td[2]" position="replace"/>
                <xpath expr="/t[1]/t[1]/div[1]/table[1]/thead[1]/tr[1]/th[2]" position="replace"/>
                <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[2]/tr[1]/t[1]/td[2]/span[1]" position="attributes">
                    <attribute name="t-options-widget">"date"</attribute>
                </xpath>
                <xpath expr="/t[1]/t[1]/div[1]/div[3]/div[3]/p[1]" position="attributes">
                    <attribute name="t-options-widget">"date"</attribute>
                </xpath>
                <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[2]/tr[1]/t[1]/td[2]" position="replace"/>
                <xpath expr="/t[1]/t[1]/div[1]/table[1]/thead[1]/tr[1]/th[2]" position="replace"/>
                <xpath expr="/t/t/div/table/thead/tr/th[1]" position="before">
                    <th>
                        <span>รหัสสินค้า</span>
                    </th>
                </xpath>
                <xpath expr="/t/t/div/table/tbody/t[2]/tr/t[1]/td[1]" position="before">
                    <td>
                        <span t-field="line.product_id.default_code"/>
                    </td>
                </xpath>
                <xpath expr="/t/t/div/div[2]" position="after">
                    <div class="row address">
                        <div class="col-5"/>
                        <div class="col-5 offset-2">
                        <div t-field="o.partner_id" t-options-widget="'contact'"/>
                        </div>
                    </div>
                </xpath>
                
                <xpath expr="//table/thead/tr[1]" position="replace">
                    <tr>
                        <th name="th_description"><strong>Description</strong></th>
                        <th name="th_taxes"><strong>Taxes</strong></th>
                        <th name="th_date_req" class="text-center"><strong>Date Req.</strong></th>
                        <th name="th_quantity" class="text-end"><strong>Qty</strong></th>
                        <th name="th_price_unit" class="text-end"><strong>Unit Price</strong></th>
                        <th name="th_discount" class="text-end">Disc.%</th>
                        <th class="text-end">ราคาสุทธิ/หน่วย<br/>Discount Unit Price</th>
                        <th name="th_amount" class="text-end"><strong>Amount</strong></th>
                    </tr>
                </xpath>
                <xpath expr="//table/tbody/t[2]/tr[1]" position="replace">
                    <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                        <t t-if="not line.display_type">
                            <td id="product">
                                <span t-field="line.name"/>
                            </td>
                            <td name="td_taxes">
                                <span t-esc="', '.join(map(lambda x: x.description or x.name, line.taxes_id))"/>
                            </td>
                            <td class="text-center">
                                <span t-field="line.date_planned"/>
                            </td>
                            <td class="text-end">
                                <span t-field="line.product_qty"/>
                                <span t-field="line.product_uom.name" groups="uom.group_uom"/>
                            </td>
                            <td class="text-end">
                                <span t-field="line.price_unit"/>
                            </td>
                            <td t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                <span t-field="line.sh_multi_discount"/>
                            </td>
                            <td class="text-end">
                                <span t-esc="'{:,.2f}'.format(line.sh_discount_price_unit)"/>
                            </td>
                            <td class="text-end">
                                <span t-field="line.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                            </td>
                        </t>
                        <t t-if="line.display_type == 'line_section'">
                            <td colspan="99" id="section">
                                <span t-field="line.name"/>
                            </td>
                            <t t-set="current_section" t-value="line"/>
                            <t t-set="current_subtotal" t-value="0"/>
                        </t>
                        <t t-if="line.display_type == 'line_note'">
                            <td colspan="99" id="note">
                                <span t-field="line.name"/>
                            </td>
                        </t>
                    </tr>
                </xpath>
            </field>
        </record>
    </data>
</odoo>